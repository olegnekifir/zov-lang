# ZOV — Zoned Object Variables

**ZOV** — декларативный язык конфигурации с поддержкой иерархических зон, типизированных переменных, арифметических выражений и безопасного импорта файлов.

## Основные концепции

### Зоны (Zones)

Зона — это именованный блок, ограничивающий область видимости ключей. Зоны могут быть вложенными, формируя путь через точку.

```zov
network {
    server {
        port = 8080;
    }
}
# Результирующий ключ: network.server.port

```

### Переменные (Variables)

Объявляются с префиксом `$` на глобальном уровне или внутри зон. Обязательно завершаются точкой с запятой `;`.

```zov
$base_timeout = 30s;
timeout = $base_timeout * 2;

```

---

## Синтаксис и Типы данных

### Литералы и единицы измерения

Язык поддерживает специфические типы данных, распознаваемые на уровне лексера:

| Тип | Формат / Пример | Описание |
| --- | --- | --- |
| **String** | `"Hello \"World\""` | Поддерживает экранирование и интерполяцию. |
| **Number** | `42`, `-3.14` | Целые числа и числа с плавающей точкой. |
| **Boolean** | `true`, `false` | Логические значения. |
| **Duration** | `100ms`, `15s`, `5m`, `1h` | Длительность времени. |
| **Size** | `512KB`, `10GB`, `2TiB` | Объемы данных (бинарные и десятичные). |
| **DateTime** | `2025-06-15T12:00:00` | ISO 8601 формат даты и времени. |
| **Null** | `null`, `none` | Отсутствие значения. |

### Списки

Элементы перечисляются через запятую. Интерпретатор сохраняет их как список значений.

```zov
allow_ports = 80, 443, 8080;

```

### Интерполяция строк

Внутри строк в двойных кавычках можно использовать переменные или выражения:

```zov
$user = "admin";
greeting = "Welcome, $user!"; # Простая переменная
path = "data/${$user + \"_logs\"}"; # Выражение в фигурных скобках

```

---

## Функции и Выражения

### Встроенные функции

Интерпретатор поддерживает ряд стандартных функций для обработки данных:

* `env("VAR", "default")` — получение переменной окружения.
* `concat(a, b, ...)` — объединение строк.
* `join(", ", items...)` — склеивание списка с разделителем.
* `upper(str)` / `lower(str)` — изменение регистра.

### Арифметика

Поддерживаются операции `+`, `-`, `*`, `/`, `%`.

* Оператор `+` выполняет конкатенацию, если один из операндов — строка.
* Для точных финансовых вычислений предусмотрен режим `Decimal`.

---

## Модульность

### Include

Инструкция `include` позволяет разбивать конфигурацию на части:

```zov
include "database.zov";

```

**Особенности реализации:**

* **Безопасность:** Запрещен выход за пределы базовой директории (Path Traversal Protection).
* **Защита от циклов:** Парсер отслеживает уже загруженные файлы и выдает ошибку при обнаружении кругового импорта.

---

## Использование (Python API)

Интеграция в проект выполняется через функции `load_zov` (для получения словаря) или `parse_file` (для получения AST):

```python
from zov import load_zov

# Загрузка и интерпретация
config = load_zov("app.zov", use_decimal=True)

print(config["network.server.port"])

```

### CLI

Инструмент командной строки для валидации и конвертации:

```bash
# Проверка синтаксиса и вывод в JSON
python zov-cli.py config.zov --json

# Просмотр дерева AST
python zov-cli.py config.zov --ast

```